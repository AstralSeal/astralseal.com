// Language translations for Dimension Rift page
const translations = {
  en: {
    // Navigation
    nav_home: "Home",
    nav_download: "Download",
    nav_support: "Support",
    
    // Buttons
    btn_wishlist: "Wishlist on Steam",
    btn_follow: "Follow us on Facebook",
    btn_view_profile: "View Profile",
    
    // Information Section
    info_title: "Information",
    info_genre: "Genre",
    info_genre_value: "Visual Novel",
    info_length: "Length",
    info_length_value: "~10 hours",
    info_release: "Release",
    info_release_value: "Coming Soon",
    info_price: "Price",
    info_price_value: "N/A",
    
    // Specification Section
    spec_title: "Specification",
    spec_os: "OS",
    spec_os_value: "Windows 10/11 (64-bit)",
    spec_processor: "Processor",
    spec_processor_value: "1.8GHz Dual-Core CPU or above",
    spec_memory: "Memory",
    spec_memory_value: "2 GB RAM",
    spec_graphics: "Graphics",
    spec_graphics_value: "Integrated graphics",
    spec_storage: "Storage",
    spec_storage_value: "~3 GB",
    spec_resolution: "Resolution",
    spec_resolution_value: "1920 x 1080 px",
    spec_engine: "Engine",
    spec_engine_value: "Ren'Py",
    
    // Languages Section
    lang_title: "Languages",
    lang_interface: "Interface",
    lang_audio: "Audio",
    lang_subtitles: "Subtitles",
    lang_english: "English",
    lang_thai: "Thai",
    
    // Disclaimer Section
    disclaimer_title: "Disclaimer",
    disclaimer_text1: "Characters, places and events are fictional - resemblance of real-world people, places or events is purely coincidental.",
    disclaimer_text2: "All characters that appear in any visual depiction are at least 18 years of age or older.",
    
    // Main Content
    page_title: "Dimension Rift : Otaku Save The World",
    page_subtitle: "AstralSeal 4th Project • Coming Soon",
    
    // Overview Section
    overview_title: "Overview",
    overview_text: "The 4th visual novel game from the creators of Re:Fragment ~Absolute Ambition~. In Dimension Rift: Otaku Save The World, chaos breaks loose when anime characters escape into the real world! Join forces with an top-tier otaku and the guardian of the anime world on a mission to find \"Edith\" a magical pen that can rewrite any story! Follow the adventure of an otaku who must save the world like no anime has shown before!",
    
    // Story Section
    story_title: "Story",
    story_p1: "When \"Edith,\" the mystical pen capable of rewriting the storylines of anime worlds, is stolen, the real world faces turmoil as dimensional rifts tear open, allowing anime characters to spill into reality.",
    story_p2: "\"Shimada Yuki,\" the story's protagonist—a legendary-class otaku—must team up with \"Lecia,\" the guardian of anime world balance, to stop this chaos. However, capturing the escaped characters proves far from simple, as they must deal with countless mishaps and the quirky, troublesome personalities of these characters that give Yuki such headaches he's forced to seek help from \"Shirogane Hime,\" a beautiful IT genius who excels at everything—especially her sharp tongue.",
    story_p3: "What's worse is that the only way to send these displaced characters back to their worlds is to \"capture their hearts.\" Will Yuki and his companions be able to win over all the characters' hearts and protect both worlds? Or will everything be rewritten... by the pen Edith?",
    
    // Features Section
    features_title: "Features",
    feature_1: "- 10-hour storyline with multiple endings",
    feature_2: "- Easy one-handed gameplay",
    feature_3: "- Full HD (1080p) graphics",
    feature_4: "- Engaging mystery plot that keeps you hooked from start to finish",
    feature_5: "- Full Thai voice acting included",
    
    // Characters Section
    char_main_title: "Main Characters",
    char_support_title: "Supporting Characters",
    
    // Lecia
    char_lecia_name: "Lecia Forentier Erdiah Mirania de Evalia",
    char_lecia_desc: "The young guardian of the anime world's balance. Despite her noble title and responsibilities, she's quite clumsy when it comes to human world technology. She wields the legendary \"Edith\" pen, which can rewrite anime storylines.",
    
    // Hime
    char_hime_name: "Shirogane Hime",
    char_hime_desc: "A genius IT specialist and Yuki's childhood friend. She's the brains behind the operation to capture the escaped anime characters. Despite her sharp tongue and no-nonsense attitude, she cares deeply for her friends and has a soft spot for romantic stories.",
    
    // Supporting Characters
    char_sub_a: "Sub Character A",
    char_sub_b: "Sub Character B",
    char_sub_c: "Sub Character C",
    char_sub_d: "Sub Character D",
    
    // Development Team
    dev_title: "Development Team",
    dev_director: "Director",
    dev_scenario: "Scenario Writer",
    dev_artist: "Artist/Character Design",
    dev_programming: "Programming",
    
    // Gallery
    gallery_title: "Gallery",
    
    // Footer
    footer_copyright: "© 2025 AstralSeal. All rights reserved.",
    footer_tagline: "The Universe Belongs to the Seal!"
  },
  th: {
    // Navigation
    nav_home: "หน้าหลัก",
    nav_download: "ดาวน์โหลด",
    nav_support: "ติดต่อเรา",
    
    // Buttons
    btn_wishlist: "เพิ่มใน Wishlist บน Steam",
    btn_follow: "ติดตามเราบน Facebook",
    btn_view_profile: "ดูโปรไฟล์",
    
    // Information Section
    info_title: "ข้อมูล",
    info_genre: "ประเภท",
    info_genre_value: "วิชวลโนเวล",
    info_length: "ความยาว",
    info_length_value: "~10 ชั่วโมง",
    info_release: "วันวางจำหน่าย",
    info_release_value: "เร็วๆ นี้",
    info_price: "ราคา",
    info_price_value: "ยังไม่กำหนด",
    
    // Specification Section
    spec_title: "ความต้องการของระบบ",
    spec_os: "ระบบปฏิบัติการ",
    spec_os_value: "Windows 10/11 (64-bit)",
    spec_processor: "โปรเซสเซอร์",
    spec_processor_value: "1.8GHz Dual-Core CPU หรือสูงกว่า",
    spec_memory: "หน่วยความจำ",
    spec_memory_value: "2 GB RAM",
    spec_graphics: "การ์ดจอ",
    spec_graphics_value: "การ์ดจอแบบบูรณาการ",
    spec_storage: "พื้นที่จัดเก็บ",
    spec_storage_value: "~3 GB",
    spec_resolution: "ความละเอียด",
    spec_resolution_value: "1920 x 1080 px",
    spec_engine: "เอนจิน",
    spec_engine_value: "Ren'Py",
    
    // Languages Section
    lang_title: "ภาษา",
    lang_interface: "อินเทอร์เฟซ",
    lang_audio: "เสียง",
    lang_subtitles: "คำบรรยาย",
    lang_english: "อังกฤษ",
    lang_thai: "ไทย",
    
    // Disclaimer Section
    disclaimer_title: "ข้อจำกัดความรับผิด",
    disclaimer_text1: "ตัวละคร สถานที่ และเหตุการณ์ต่างๆ เป็นเรื่องสมมติ - ความคล้ายคลึงกับบุคคล สถานที่ หรือเหตุการณ์จริงเป็นเพียงความบังเอิญ",
    disclaimer_text2: "ตัวละครทั้งหมดที่ปรากฏในภาพมีอายุอย่างน้อย 18 ปีขึ้นไป",
    
    // Main Content
    page_title: "Dimension Rift : Otaku Save The World",
    page_subtitle: "โปรเจกต์ที่ 4 ของ AstralSeal • เร็วๆ นี้",
    
    // Overview Section
    overview_title: "ภาพรวม",
    overview_text: "เกมวิชวลโนเวลเรื่องที่ 4 จากผู้สร้าง Re:Fragment ~Absolute Ambition~ ใน Dimension Rift: Otaku Save The World ความวุ่นวายเกิดขึ้นเมื่อตัวละครอนิเมะหนีออกมาสู่โลกแห่งความจริง! ร่วมมือกับโอตาคุระดับตำนานและผู้พิทักษ์โลกอนิเมะในภารกิจค้นหา \"เอดิธ\" ปากกาวิเศษที่สามารถเขียนเรื่องราวใดๆ ใหม่ได้! ติดตามการผจญภัยของโอตาคุที่ต้องช่วยโลกในแบบที่ไม่เคยมีอนิเมะเรื่องไหนทำมาก่อน!",
    
    // Story Section
    story_title: "เรื่องราว",
    story_p1: "เมื่อ \"เอดิธ\" ปากกาลึกลับที่สามารถเขียนเรื่องราวของโลกอนิเมะใหม่ได้ถูกขโมยไป โลกแห่งความจริงต้องเผชิญกับความวุ่นวายเมื่อรอยแยกมิติเปิดขึ้น ทำให้ตัวละครอนิเมะหลั่งไหลเข้ามาสู่โลกจริง",
    story_p2: "\"ชิมาดะ ยูกิ\" ตัวเอกของเรื่อง—โอตาคุระดับตำนาน—ต้องร่วมมือกับ \"เลเซีย\" ผู้พิทักษ์สมดุลของโลกอนิเมะเพื่อหยุดยั้งความวุ่นวายนี้ อย่างไรก็ตาม การจับตัวละครที่หนีออกมาไม่ใช่เรื่องง่าย เพราะพวกเขาต้องรับมือกับเหตุการณ์วุ่นวายนับไม่ถ้วนและบุคลิกแปลกๆ ที่สร้างปัญหาของตัวละครเหล่านี้ จนยูกิปวดหัวมากต้องขอความช่วยเหลือจาก \"ชิโรงาเนะ ฮิเมะ\" อัจฉริยะด้าน IT ที่เก่งทุกอย่าง—โดยเฉพาะปากจัด",
    story_p3: "ที่แย่กว่านั้นคือวิธีเดียวที่จะส่งตัวละครเหล่านี้กลับไปยังโลกของพวกเขาคือ \"ทำให้พวกเขาหลงรัก\" ยูกิและเพื่อนๆ จะสามารถทำให้ตัวละครทั้งหมดหลงรักและปกป้องทั้งสองโลกได้หรือไม่? หรือทุกอย่างจะถูกเขียนใหม่... โดยปากกาเอดิธ?",
    
    // Features Section
    features_title: "ฟีเจอร์",
    feature_1: "- เนื้อเรื่อง 10 ชั่วโมงพร้อมหลายตอนจบ",
    feature_2: "- เล่นง่ายด้วยมือเดียว",
    feature_3: "- กราฟิก Full HD (1080p)",
    feature_4: "- โครงเรื่องลึกลับที่ทำให้คุณติดตามตั้งแต่ต้นจนจบ",
    feature_5: "- พากย์เสียงภาษาไทยเต็มรูปแบบ",
    
    // Characters Section
    char_main_title: "ตัวละครหลัก",
    char_support_title: "ตัวละครสนับสนุน",
    
    // Lecia
    char_lecia_name: "เลเซีย ฟอเรนเทียร์ เออร์เดีย มิราเนีย เดอ เอวาเลีย",
    char_lecia_desc: "ผู้พิทักษ์สมดุลของโลกอนิเมะที่ยังเยาว์วัย แม้จะมีตำแหน่งสูงส่งและความรับผิดชอบมากมาย แต่เธอก็ค่อนข้างเงอะงะเมื่อต้องเจอเทคโนโลยีของโลกมนุษย์ เธอถือครองปากกา \"เอดิธ\" ในตำนานที่สามารถเขียนเรื่องราวอนิเมะใหม่ได้",
    
    // Hime
    char_hime_name: "ชิโรงาเนะ ฮิเมะ",
    char_hime_desc: "อัจฉริยะด้าน IT และเพื่อนสมัยเด็กของยูกิ เธอเป็นสมองของปฏิบัติการจับตัวละครอนิเมะที่หนีออกมา แม้จะมีปากจัดและท่าทีจริงจัง แต่เธอก็ใส่ใจเพื่อนๆ อย่างลึกซึ้งและชอบเรื่องราวโรแมนติก",
    
    // Supporting Characters
    char_sub_a: "ตัวละครรอง A",
    char_sub_b: "ตัวละครรอง B",
    char_sub_c: "ตัวละครรอง C",
    char_sub_d: "ตัวละครรอง D",
    
    // Development Team
    dev_title: "ทีมพัฒนา",
    dev_director: "ผู้กำกับ",
    dev_scenario: "นักเขียนบท",
    dev_artist: "ศิลปิน/ออกแบบตัวละคร",
    dev_programming: "โปรแกรมเมอร์",
    
    // Gallery
    gallery_title: "แกลเลอรี",
    
    // Footer
    footer_copyright: "© 2025 AstralSeal สงวนลิขสิทธิ์",
    footer_tagline: "จักรวาลเป็นของแมวน้ำ!"
  }
};

// Current language (default: English)
let currentLang = localStorage.getItem('dimensionrift_lang') || 'en';

// Function to update page content based on language
function updateContent(lang) {
  const t = translations[lang];
  if (!t) return;

  // Update HTML lang attribute
  document.documentElement.lang = lang;

  // Update navigation
  const navLinks = document.querySelectorAll('.nav a');
  if (navLinks[0]) navLinks[0].textContent = t.nav_home;
  if (navLinks[1]) navLinks[1].textContent = t.nav_download;
  if (navLinks[2]) navLinks[2].textContent = t.nav_support;

  // Update buttons
  const wishlistBtn = document.querySelector('a[href*="steampowered.com"]');
  if (wishlistBtn) {
    const icon = wishlistBtn.querySelector('i');
    wishlistBtn.textContent = t.btn_wishlist;
    if (icon) wishlistBtn.prepend(icon);
  }

  const facebookBtn = document.querySelector('a[href*="facebook.com/astralseal"]');
  if (facebookBtn) {
    const icon = facebookBtn.querySelector('i');
    facebookBtn.textContent = t.btn_follow;
    if (icon) facebookBtn.prepend(icon);
  }

  // Update Information section
  const cardTitles = document.querySelectorAll('.card-title');
  if (cardTitles[0]) cardTitles[0].textContent = t.info_title;

  const infoTable = document.querySelectorAll('.info-table')[0];
  if (infoTable) {
    const rows = infoTable.querySelectorAll('tr');
    if (rows[0]) { rows[0].querySelector('th').textContent = t.info_genre; rows[0].querySelector('td').textContent = t.info_genre_value; }
    if (rows[1]) { rows[1].querySelector('th').textContent = t.info_length; rows[1].querySelector('td').textContent = t.info_length_value; }
    if (rows[2]) { rows[2].querySelector('th').textContent = t.info_release; rows[2].querySelector('td').textContent = t.info_release_value; }
    if (rows[3]) { rows[3].querySelector('th').textContent = t.info_price; rows[3].querySelector('td').textContent = t.info_price_value; }
  }

  // Update Specification section
  if (cardTitles[1]) cardTitles[1].textContent = t.spec_title;

  const specTable = document.querySelectorAll('.info-table')[1];
  if (specTable) {
    const rows = specTable.querySelectorAll('tr');
    if (rows[0]) { rows[0].querySelector('th').textContent = t.spec_os; rows[0].querySelector('td').textContent = t.spec_os_value; }
    if (rows[1]) { rows[1].querySelector('th').textContent = t.spec_processor; rows[1].querySelector('td').textContent = t.spec_processor_value; }
    if (rows[2]) { rows[2].querySelector('th').textContent = t.spec_memory; rows[2].querySelector('td').textContent = t.spec_memory_value; }
    if (rows[3]) { rows[3].querySelector('th').textContent = t.spec_graphics; rows[3].querySelector('td').textContent = t.spec_graphics_value; }
    if (rows[4]) { rows[4].querySelector('th').textContent = t.spec_storage; rows[4].querySelector('td').textContent = t.spec_storage_value; }
    if (rows[5]) { rows[5].querySelector('th').textContent = t.spec_resolution; rows[5].querySelector('td').textContent = t.spec_resolution_value; }
    if (rows[6]) { rows[6].querySelector('th').textContent = t.spec_engine; rows[6].querySelector('td').textContent = t.spec_engine_value; }
  }

  // Update Languages section
  if (cardTitles[2]) cardTitles[2].textContent = t.lang_title;

  const langTableHeaders = document.querySelectorAll('thead th');
  if (langTableHeaders[1]) langTableHeaders[1].textContent = t.lang_interface;
  if (langTableHeaders[2]) langTableHeaders[2].textContent = t.lang_audio;
  if (langTableHeaders[3]) langTableHeaders[3].textContent = t.lang_subtitles;
  
  const langRows = document.querySelectorAll('tbody tr');
  if (langRows[0]) langRows[0].querySelector('td').textContent = t.lang_english;
  if (langRows[1]) langRows[1].querySelector('td').textContent = t.lang_thai;

  // Update Disclaimer section
  if (cardTitles[3]) cardTitles[3].textContent = t.disclaimer_title;

  const allPs = document.querySelectorAll('.card-pad p');
  for (let i = 0; i < allPs.length; i++) {
    const text = allPs[i].textContent;
    if (text.includes('fictional') || text.includes('สมมติ')) {
      allPs[i].textContent = t.disclaimer_text1;
      if (allPs[i + 1]) allPs[i + 1].textContent = t.disclaimer_text2;
      break;
    }
  }

  // Update main content
  const mainTitle = document.querySelector('.title');
  if (mainTitle) mainTitle.textContent = t.page_title;

  const subtitle = document.querySelector('.subtitle');
  if (subtitle) subtitle.textContent = t.page_subtitle;

  // Update Overview section
  const panelTitles = document.querySelectorAll('#panel-overview .card-title');
  if (panelTitles[0]) panelTitles[0].textContent = t.overview_title;

  const panelPs = document.querySelectorAll('#panel-overview > p');
  if (panelPs[0]) panelPs[0].textContent = t.overview_text;

  // Update Story section
  if (panelTitles[1]) panelTitles[1].textContent = t.story_title;

  // Get all paragraphs in panel-overview
  const allPanelPs = document.querySelectorAll('#panel-overview p');
  let storyIndex = 0;
  for (let i = 0; i < allPanelPs.length; i++) {
    const text = allPanelPs[i].textContent.trim();
    // Skip the overview paragraph (first one)
    if (i === 0) continue;
    
    // Update story paragraphs (they contain character names or "Edith")
    if (text.includes('Edith') || text.includes('เอดิธ') || 
        text.includes('Shimada') || text.includes('ชิมาดะ') ||
        text.includes('capture their hearts') || text.includes('ทำให้พวกเขาหลงรัก')) {
      if (storyIndex === 0) { allPanelPs[i].textContent = t.story_p1; storyIndex++; }
      else if (storyIndex === 1) { allPanelPs[i].textContent = t.story_p2; storyIndex++; }
      else if (storyIndex === 2) { allPanelPs[i].textContent = t.story_p3; break; }
    }
  }

  // Update Features section
  if (panelTitles[2]) panelTitles[2].textContent = t.features_title;

  const featuresList = document.querySelector('#panel-overview ul');
  if (featuresList) {
    const items = featuresList.querySelectorAll('li');
    if (items[0]) items[0].textContent = t.feature_1;
    if (items[1]) items[1].textContent = t.feature_2;
    if (items[2]) items[2].textContent = t.feature_3;
    if (items[3]) items[3].textContent = t.feature_4;
    if (items[4]) items[4].textContent = t.feature_5;
  }

  // Update Characters section
  const charMainTitle = document.querySelector('#mainCharacters');
  if (charMainTitle) charMainTitle.textContent = t.char_main_title;

  const charSupportTitle = document.querySelector('#supportCharacters');
  if (charSupportTitle) charSupportTitle.textContent = t.char_support_title;

  // Update character cards
  const charCards = document.querySelectorAll('.char');
  if (charCards[0]) {
    const name = charCards[0].querySelector('.name');
    const desc = charCards[0].querySelector('.description');
    const btn = charCards[0].querySelector('.btn');
    if (name) name.textContent = t.char_lecia_name;
    if (desc) desc.textContent = t.char_lecia_desc;
    if (btn) {
      const icon = btn.querySelector('i');
      btn.textContent = t.btn_view_profile;
      if (icon) btn.prepend(icon);
    }
  }

  if (charCards[1]) {
    const name = charCards[1].querySelector('.name');
    const desc = charCards[1].querySelector('.description');
    const btn = charCards[1].querySelector('.btn');
    if (name) name.textContent = t.char_hime_name;
    if (desc) desc.textContent = t.char_hime_desc;
    if (btn) {
      const icon = btn.querySelector('i');
      btn.textContent = t.btn_view_profile;
      if (icon) btn.prepend(icon);
    }
  }

  // Update supporting characters
  if (charCards[2]) {
    const name = charCards[2].querySelector('.name');
    if (name) name.textContent = t.char_sub_a;
  }
  if (charCards[3]) {
    const name = charCards[3].querySelector('.name');
    if (name) name.textContent = t.char_sub_b;
  }
  if (charCards[4]) {
    const name = charCards[4].querySelector('.name');
    if (name) name.textContent = t.char_sub_c;
  }
  if (charCards[5]) {
    const name = charCards[5].querySelector('.name');
    if (name) name.textContent = t.char_sub_d;
  }

  // Update Development Team
  const devTitleIndex = Array.from(cardTitles).findIndex(el => 
    el.textContent.includes('Development') || el.textContent.includes('ทีมพัฒนา')
  );
  if (devTitleIndex !== -1 && cardTitles[devTitleIndex]) {
    cardTitles[devTitleIndex].textContent = t.dev_title;
  }

  const staffItems = document.querySelectorAll('.staff-item');
  if (staffItems[0]) staffItems[0].querySelector('span').textContent = t.dev_director;
  if (staffItems[1]) staffItems[1].querySelector('span').textContent = t.dev_scenario;
  if (staffItems[2]) staffItems[2].querySelector('span').textContent = t.dev_artist;
  if (staffItems[3]) staffItems[3].querySelector('span').textContent = t.dev_programming;

  // Update Gallery
  const galleryTitleIndex = Array.from(cardTitles).findIndex(el => 
    el.textContent.includes('Gallery') || el.textContent.includes('แกลเลอรี')
  );
  if (galleryTitleIndex !== -1 && cardTitles[galleryTitleIndex]) {
    cardTitles[galleryTitleIndex].textContent = t.gallery_title;
  }

  // Update Footer
  const footerCopyright = document.querySelector('.footer-copyright');
  if (footerCopyright) footerCopyright.textContent = t.footer_copyright;

  const footerTagline = document.querySelector('.footer-tagline');
  if (footerTagline) footerTagline.textContent = t.footer_tagline;

  // Save language preference
  localStorage.setItem('dimensionrift_lang', lang);
  currentLang = lang;
}

// Function to switch language
function switchLanguage(lang) {
  updateContent(lang);
  
  // Update language button display
  const languageButton = document.querySelector('.language-button span');
  if (languageButton) {
    languageButton.textContent = lang === 'en' ? 'English' : 'Thai (ภาษาไทย)';
  }
  
  // Update checkmarks
  const languageOptions = document.querySelectorAll('.language-option');
  languageOptions.forEach((option, index) => {
    const checkIcon = option.querySelector('i.fa-check');
    if (checkIcon) {
      if ((index === 0 && lang === 'en') || (index === 1 && lang === 'th')) {
        checkIcon.style.display = 'inline-block';
      } else {
        checkIcon.style.display = 'none';
      }
    }
  });
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  // Load saved language or default to English
  updateContent(currentLang);
  
  // Update initial checkmark
  const languageOptions = document.querySelectorAll('.language-option');
  languageOptions.forEach((option, index) => {
    const checkIcon = option.querySelector('i.fa-check');
    if (checkIcon) {
      if ((index === 0 && currentLang === 'en') || (index === 1 && currentLang === 'th')) {
        checkIcon.style.display = 'inline-block';
      }
    }
  });
});
